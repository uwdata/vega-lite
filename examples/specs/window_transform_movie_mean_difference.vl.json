{
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
    "description": "Bar graph showing how each of the 'really good' movies is different from the average movie rating. Really good is defined to differ from the average movie rating by more than 2.5 points.",
    "width": 300,
    "height": 50,
    "data": { "url": "data/movies.json" },
    "layer": [{
        "transform": [{
                "window": [{
                    "op": "mean",
                    "field": "IMDB_Rating",
                    "as": "AverageRating"
                }],
                "frame": [null, null]
            },
            {
                "calculate": "datum.IMDB_Rating - datum.AverageRating",
                "as": "DifferenceFromMean"
            },
            {
                "filter": "datum.DifferenceFromMean > 2.5"
            }
        ],
        "mark": { "type": "bar", "clip": true },
        "encoding": {
            "x": {
                "field": "Title",
                "type": "ordinal"
            },
            "y": {
                "field": "IMDB_Rating",
                "type": "quantitative",
                "scale": { "domain": [7, 10] },
                "axis": { "title": "IMDB rating" }
            }
        }
    }]
}