{
 "$schema": "http://json-schema.org/draft-04/schema#",
 "type": "object",
 "required": ["marktype","enc","cfg"],
 "properties": {
  "marktype": {
   "type": "string",
   "enum": ["point","bar","line","area","circle","square","text"]
  },
  "enc": {
   "type": "object",
   "properties": {
    "x": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      }
     }
    },
    "y": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      }
     }
    },
    "row": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O"]},
      "bin": {"type": "boolean"},
      "aggr": {"type": "string","enum": [null,"count"]}
     }
    },
    "col": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O"]},
      "bin": {"type": "boolean"},
      "aggr": {"type": "string","enum": [null,"count"]}
     }
    },
    "size": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      }
     }
    },
    "color": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      }
     }
    },
    "alpha": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      }
     }
    },
    "shape": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O"]},
      "bin": {"type": "boolean"},
      "aggr": {"type": "string","enum": [null,"count"]}
     }
    },
    "text": {
     "type": "object",
     "required": ["name","type"],
     "properties": {
      "name": {"type": "string"},
      "type": {"type": "string","enum": ["O","Q","T"]},
      "bin": {"type": "boolean","supportedTypes": ["Q","O"]},
      "aggr": {
       "type": "string",
       "enum": [null,"avg","sum","min","max","count"],
       "supportedEnums": {
        "Q": [null,"avg","sum","min","max","count"],
        "O": [null,"count"],
        "T": [null,"avg","min","max","count"]
       }
      },
      "fn": {
       "type": "string",
       "enum": [null,"month","year","day","date","hour","minute","second"],
       "supportedTypes": {
        "month": {"T": 1},
        "year": {"T": 1},
        "day": {"T": 1},
        "date": {"T": 1},
        "hour": {"T": 1},
        "minute": {"T": 1},
        "second": {"T": 1}
       }
      },
      "scale": {
       "type": "object",
       "properties": {
        "type": {
         "type": "string",
         "enum": ["linear","log","pow","sqrt","quantile"],
         "supportedTypes": ["Q"]
        },
        "reverse": {"type": "boolean","default": false},
        "zero": {
         "type": "boolean",
         "description": "Include zero",
         "default": false,
         "supportedTypes": ["Q"]
        }
       }
      },
      "text": {
       "type": "object",
       "properties": {
        "weight": {"type": "string","enum": ["normal","bold"],"default": "normal"},
        "size": {"type": "integer","default": 10,"minimum": 0},
        "font": {"type": "string","default": "Halvetica Neue"}
       }
      }
     }
    }
   }
  },
  "cfg": {
   "type": "object",
   "properties": {
    "dataFormatType": {"type": "string","enum": ["json","csv"]},
    "useVegaServer": {"type": "boolean"},
    "dataUrl": {"type": "string"},
    "vegaServerTable": {"type": "string"}
   }
  }
 }
}
